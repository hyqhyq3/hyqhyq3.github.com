---
layout: post
title: 为lighttpd开启ssl访问
---
<p>为我的博客开启了ssl的访问，我也不知道有啥好处，就当是弄着玩吧。</p>  <p>ssl的机制中，有一个ca，然后有进行通讯的A和B，这里是Server和Browser，在BS模式中，浏览器不需要证书（当服务器需要验证客户身份时，也需要证书，如支付宝的个人证书）。</p>  <p>ssl如果想弄到一个ca的认证，是需要花钱的，而且还不便宜。如果是一种面向小众的情况，如一个企业内部使用，可以使用私有证书，也就是自己来充当ca这个角色。</p>  <p>首先就来生成一个ca,先建立目录结构</p>  <blockquote>   <p>mkdir -p ./demoCA/{private,newcerts}      <br />touch ./demoCA/index.txt       <br />echo 01 &gt; ./demoCA/serial</p> </blockquote>  <p>生成CA证书的RSA密钥对</p>  <blockquote>   <p>openssl genrsa -out ./demoCA/private/cakey.pem 2048</p> </blockquote>  <p>然后生成一份ca的证书</p>  <blockquote>   <p>openssl req -new -x509 -days 3650 -key ./demoCA/private/cakey.pem -out ./demoCA/cacart.pem</p> </blockquote>  <p>根据提示，填入一些信息，然后就生成了cacert.pem这个证书</p>  <p>接着就是使用这个CA来签发证书了</p>  <blockquote>   <p>openssl genrsa -out server.key 2048      <br />openssl req -new -days 365 -key server.key -out server.csr       <br />openssl ca -in server.csr -out server.crt       <br />cat ca.crt server.crt &gt; /etc/lighttpd/server.pem</p> </blockquote>  <p>然后将server.pem在lighttpd配置ssl</p>  <blockquote>   <p>cd /etc/lighttpd/conf-enabled.d      <br />ln -s ../conf-available/10-ssl.conf .       <br />vi 10-ssl.conf</p> </blockquote>  <p>然后重启服务</p>  <blockquote>   <p>service lighttpd restart</p> </blockquote>  <p>还可以把ca.crt导入到客户端浏览器中，然后我们的网站也可以看到这把小绿锁了</p>  <p><a href="http://blog.programcareer.net/wp-content/wp-uploads/2011/12/image.png"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://blog.programcareer.net/wp-content/wp-uploads/2011/12/image_thumb.png" width="174" height="65" /></a></p>
